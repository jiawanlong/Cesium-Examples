<!--********************************************************************
* by jiawanlong
*********************************************************************-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./../../libs/cesium/Cesium1.98/Widgets/widgets.css">
    <script type="text/javascript" src="./../../libs/cesium/Cesium1.98/Cesium.js"></script>
</head>

<body style="margin: 0; overflow: hidden; background: #fff; width: 100%; height: 100%; position: absolute; top: 0">
    <div id="map" style="margin: 0 auto; width: 100%; height: 100%"></div>
    <script type="text/javascript">

        const viewer = new Cesium.Viewer('map', {
            imageryProvider: false,
            baseLayerPicker: false,
        });

        var xyz = new Cesium.UrlTemplateImageryProvider({
            "url": '//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg'
        })
        viewer.imageryLayers.addImageryProvider(xyz)
        viewer.scene.debugShowFramesPerSecond = true;

        viewer.clock.onTick.addEventListener(() => {
            let pitch = Cesium.Math.toDegrees(viewer.camera.pitch);
            if (pitch > -30) {
                pitch = -30;
                contrlDea()
            } else if (pitch < -90) {
                pitch = -90
                contrlDea()
            }
            viewer.camera.setView({
                orientation: {
                    heading: viewer.camera.heading,
                    pitch: Cesium.Math.toRadians(pitch),
                    roll: viewer.camera.roll
                }
            });
            // contrlDea()
        })

        
        function contrlDea() {
            const cameraController = viewer.scene.screenSpaceCameraController;
            cameraController, enableLook = false;//禁用惯性滚动
            cameraController.enableTranslate = false;//禁用惯性平移
            cameraController.enableRotate = false;//禁用旋转性
            cameraController.enableZoom = false;//禁用缩放性
            cameraController.enableTilt = false;//禁用俯仰惯性
            cameraController.enableInputs = true;
            // allowDea()
        }

        function allowDea(){
            const cameraController = viewer.scene.screenSpaceCameraController;
            cameraController, enableLook = true;//禁用惯性滚动
            cameraController.enableTranslate = true;//禁用惯性平移
            cameraController.enableRotate = true;//禁用旋转性
            cameraController.enableZoom = true;//禁用缩放性
            cameraController.enableTilt = true;//禁用俯仰惯性
            // cameraController.enableInputs = false;
        }
    </script>
</body>

</html>